<!doctype html><html lang=zh dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content='
  控制显示TOC
  #

右侧栏的文章内容目录TOC修改
多级菜单的默认首页 文件名 _index.md， 即使在front matter中添加了 bookToc: true，也不会显示右侧TOC，默认右侧栏显示的是tag，categories的列表。
非首页则可以自动显示TOC。
若首页中的内容也有多级标题，如何给其增加右侧栏TOC？

  方案：使用内容参数强制显示TOC
  #

在 _index.md 文件中添加特殊参数：
---
date: 2025-05-03
linktitle: "内容目录"
title: "右侧栏的文章内容目录修改"
weight: 10
bookToc: true
type: "docs"
layout: "single"
---
添加了 type: &ldquo;docs&rdquo; 和 layout: &ldquo;single&rdquo; 参数，这会强制Hugo使用单页面布局，而非首页布局。

  方案：创建自定义布局文件
  #

如果不想直接修改主题文件，可以创建自定义布局：

在项目根目录创建： /Users/projects/hugo-book/layouts/_default/section.html
复制主题中的 single.html 内容到这个文件
确保TOC部分不受首页限制

当然，还可以使用shortcode插入TOC等方法，这里我们推荐优先采纳不用改代码的方案。

  撤销默认首页底部的子页面列表
  #

hugo-book主题中，默认在左侧菜单中显示所有页面和子页面的文章列表。
在主题有缺陷的情况下，若一个页面有子页面，可能页面正文下方，还有一个与左侧栏相同的子页面列表。
所以两者重复了，我们仅仅保留一个左侧栏的文章列表即可。
如何撤销默认首页底部的子菜单（文章列表）？
最简单的方法是在_custom.scss 增加以下代码：
.book-page .markdown > ul:last-child,
.book-page .markdown > ol:last-child {
  display: none;
}
然后，通过配置默认首页来控制是否在左侧栏显示全部页面，在front matter中增加配置：'><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://cc.coolshell.in/docs/hugo/config-book/"><meta property="og:site_name" content="众创社区"><meta property="og:title" content="右侧栏的文章内容目录修改"><meta property="og:description" content='控制显示TOC # 右侧栏的文章内容目录TOC修改
多级菜单的默认首页 文件名 _index.md， 即使在front matter中添加了 bookToc: true，也不会显示右侧TOC，默认右侧栏显示的是tag，categories的列表。
非首页则可以自动显示TOC。
若首页中的内容也有多级标题，如何给其增加右侧栏TOC？
方案：使用内容参数强制显示TOC # 在 _index.md 文件中添加特殊参数：
--- date: 2025-05-03 linktitle: "内容目录" title: "右侧栏的文章内容目录修改" weight: 10 bookToc: true type: "docs" layout: "single" --- 添加了 type: “docs” 和 layout: “single” 参数，这会强制Hugo使用单页面布局，而非首页布局。
方案：创建自定义布局文件 # 如果不想直接修改主题文件，可以创建自定义布局：
在项目根目录创建： /Users/projects/hugo-book/layouts/_default/section.html 复制主题中的 single.html 内容到这个文件 确保TOC部分不受首页限制 当然，还可以使用shortcode插入TOC等方法，这里我们推荐优先采纳不用改代码的方案。
撤销默认首页底部的子页面列表 # hugo-book主题中，默认在左侧菜单中显示所有页面和子页面的文章列表。
在主题有缺陷的情况下，若一个页面有子页面，可能页面正文下方，还有一个与左侧栏相同的子页面列表。
所以两者重复了，我们仅仅保留一个左侧栏的文章列表即可。
如何撤销默认首页底部的子菜单（文章列表）？
最简单的方法是在_custom.scss 增加以下代码：
.book-page .markdown > ul:last-child, .book-page .markdown > ol:last-child { display: none; } 然后，通过配置默认首页来控制是否在左侧栏显示全部页面，在front matter中增加配置：'><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="docs"><meta property="article:published_time" content="2025-05-03T00:00:00+00:00"><meta property="article:modified_time" content="2025-05-03T00:00:00+00:00"><title>内容目录 | 众创社区</title><link rel=icon href=../../../favicon.png><link rel=manifest href=../../../manifest.json><link rel=canonical href=https://cc.coolshell.in/docs/hugo/config-book/><link rel=stylesheet href=../../../book.min.8dfd1a1e3782850a537d9159c60812d71ee981036750b80778a05084b554e7e1.css integrity="sha256-jf0aHjeChQpTfZFZxggS1x7pgQNnULgHeKBQhLVU5+E=" crossorigin=anonymous><script defer src=../../../fuse.min.js></script><script defer src=../../../zh.search.min.b490c6bad81e7a968432b779b0f91bed6c7c7ec0ca8aa368922fec178a55ee72.js integrity="sha256-tJDGutgeepaEMrd5sPkb7Wx8fsDKiqNoki/sF4pV7nI=" crossorigin=anonymous></script><script defer src=../../../sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=../../../><span>众创社区</span></a></h2><div class="book-search hidden"><input type=text id=book-search-input placeholder=搜索 aria-label=搜索 maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=../../../docs/cc/>众创社区</a><ul><li><a href=../../../docs/cc/what/>定义</a></li><li><a href=../../../docs/cc/when/>时间</a></li><li><a href=../../../docs/cc/where/>地理</a></li><li><a href=../../../docs/cc/who/>主体</a></li><li><a href=../../../docs/cc/whom/>客体</a></li><li><a href=../../../docs/cc/which/>要素</a></li><li><a href=../../../docs/cc/why/>缘由</a></li><li><a href=../../../docs/cc/cases1/>案例1</a></li><li><a href=../../../docs/cc/cases2/>案例2</a></li><li><a href=../../../docs/cc/how/>怎么做？</a></li><li><a href=../../../docs/cc/guide/>操作手册</a></li></ul></li><li><a href=../../../docs/com/>事业介绍</a><ul><li><a href=../../../docs/com/ps/>业务范围</a><ul><li><a href=../../../docs/com/ps/community/>社区服务</a></li><li><a href=../../../docs/com/ps/rurals/>乡村事业</a></li><li><a href=../../../docs/com/ps/esg/>公益事业</a></li></ul></li><li><a href=../../../docs/com/hr/>关于我们</a><ul><li><a href=../../../docs/com/hr/profession/>专业职能</a></li><li><a href=../../../docs/com/hr/cases/>项目案例</a></li></ul></li><li><a href=../../../docs/com/market/>财务营收</a></li></ul></li><li><input type=checkbox id=section-4bd942d1bcdb9161a7f1689d7901a6a2 class=toggle checked>
<label for=section-4bd942d1bcdb9161a7f1689d7901a6a2 class="flex justify-between"><a href=../../../docs/hugo/>Hugo-Book FAQ</a></label><ul><li><a href=../../../docs/hugo/fold-menu/>折叠菜单</a></li><li><a href=../../../docs/hugo/config-book/ class=active>内容目录</a></li><li><a href=../../../docs/hugo/enforce-https/>强制https</a></li><li><a href=../../../docs/hugo/func-key/>参数列表</a></li><li><a href=../../../docs/hugo/github-debug/>github登录</a></li><li><a href=../../../docs/hugo/page-style/>页面样式</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=../../../svg/menu.svg class=book-icon alt=Menu></label><h3>内容目录</h3><label for=toc-control><img src=../../../svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#控制显示toc>控制显示TOC</a><ul><li><a href=#方案使用内容参数强制显示toc>方案：使用内容参数强制显示TOC</a></li><li><a href=#方案创建自定义布局文件>方案：创建自定义布局文件</a></li><li><a href=#撤销默认首页底部的子页面列表>撤销默认首页底部的子页面列表</a></li></ul></li><li><a href=#默认首页的子页面列表的文章摘要的长度控制>默认首页的子页面列表的文章摘要的长度控制</a></li></ul></nav></aside></header><article class=markdown><h1>右侧栏的文章内容目录修改</h1><div class="flex align-center text-small book-post-meta"><img src=../../../svg/calendar.svg class=book-icon alt>
<span>2025-05-03</span>
<span class=post-author style=margin-left:2em>Atom.X</span></div><h1 id=控制显示toc>控制显示TOC
<a class=anchor href=#%e6%8e%a7%e5%88%b6%e6%98%be%e7%a4%batoc>#</a></h1><p>右侧栏的文章内容目录TOC修改</p><p>多级菜单的默认首页 文件名 _index.md， 即使在front matter中添加了 <code>bookToc: true</code>，也不会显示右侧TOC，默认右侧栏显示的是tag，categories的列表。</p><p>非首页则可以自动显示TOC。</p><p>若首页中的内容也有多级标题，如何给其增加右侧栏TOC？</p><h2 id=方案使用内容参数强制显示toc>方案：使用内容参数强制显示TOC
<a class=anchor href=#%e6%96%b9%e6%a1%88%e4%bd%bf%e7%94%a8%e5%86%85%e5%ae%b9%e5%8f%82%e6%95%b0%e5%bc%ba%e5%88%b6%e6%98%be%e7%a4%batoc>#</a></h2><p>在 _index.md 文件中添加特殊参数：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md><span style=display:flex><span>---
</span></span><span style=display:flex><span>date: 2025-05-03
</span></span><span style=display:flex><span>linktitle: &#34;内容目录&#34;
</span></span><span style=display:flex><span>title: &#34;右侧栏的文章内容目录修改&#34;
</span></span><span style=display:flex><span>weight: 10
</span></span><span style=display:flex><span>bookToc: true
</span></span><span style=display:flex><span>type: &#34;docs&#34;
</span></span><span style=display:flex><span>layout: &#34;single&#34;
</span></span><span style=display:flex><span>---
</span></span></code></pre></div><p>添加了 type: &ldquo;docs&rdquo; 和 layout: &ldquo;single&rdquo; 参数，这会强制Hugo使用单页面布局，而非首页布局。</p><h2 id=方案创建自定义布局文件>方案：创建自定义布局文件
<a class=anchor href=#%e6%96%b9%e6%a1%88%e5%88%9b%e5%bb%ba%e8%87%aa%e5%ae%9a%e4%b9%89%e5%b8%83%e5%b1%80%e6%96%87%e4%bb%b6>#</a></h2><p>如果不想直接修改主题文件，可以创建自定义布局：</p><ol><li>在项目根目录创建： /Users/projects/hugo-book/layouts/_default/section.html</li><li>复制主题中的 single.html 内容到这个文件</li><li>确保TOC部分不受首页限制</li></ol><p>当然，还可以使用shortcode插入TOC等方法，这里我们推荐优先采纳不用改代码的方案。</p><h2 id=撤销默认首页底部的子页面列表>撤销默认首页底部的子页面列表
<a class=anchor href=#%e6%92%a4%e9%94%80%e9%bb%98%e8%ae%a4%e9%a6%96%e9%a1%b5%e5%ba%95%e9%83%a8%e7%9a%84%e5%ad%90%e9%a1%b5%e9%9d%a2%e5%88%97%e8%a1%a8>#</a></h2><p>hugo-book主题中，默认在左侧菜单中显示所有页面和子页面的文章列表。</p><p>在主题有缺陷的情况下，若一个页面有子页面，可能页面正文下方，还有一个与左侧栏相同的子页面列表。</p><p>所以两者重复了，我们仅仅保留一个左侧栏的文章列表即可。</p><p>如何撤销默认首页底部的子菜单（文章列表）？</p><p>最简单的方法是在<code>_custom.scss</code> 增加以下代码：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scss data-lang=scss><span style=display:flex><span><span style=color:#a6e22e>.book-page</span> <span style=color:#a6e22e>.markdown</span> <span style=color:#f92672>&gt;</span> <span style=color:#f92672>ul</span><span style=color:#a6e22e>:last-child</span><span style=color:#f92672>,</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>.book-page</span> <span style=color:#a6e22e>.markdown</span> <span style=color:#f92672>&gt;</span> <span style=color:#f92672>ol</span><span style=color:#a6e22e>:last-child</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>display</span><span style=color:#f92672>:</span> none;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>然后，通过配置默认首页来控制是否在左侧栏显示全部页面，在front matter中增加配置：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-md data-lang=md><span style=display:flex><span>---
</span></span><span style=display:flex><span>cascade:
</span></span><span style=display:flex><span>    type: docs
</span></span><span style=display:flex><span>    no_list: true
</span></span><span style=display:flex><span>---
</span></span></code></pre></div><p>正常情况下，配置很简单，只需要在某一个专栏的父页面做以上配置，其子页面也都将继承父页面的配置。</p><p>但是可能由于主题缺陷，不支持简单配置，要求在全部的父页面和子页面中都要增加配置 <code>no_list: true</code>，这样就把事情复杂化了。</p><p>因此以上两处代码的配合使用，将有效解决问题。</p><h1 id=默认首页的子页面列表的文章摘要的长度控制>默认首页的子页面列表的文章摘要的长度控制
<a class=anchor href=#%e9%bb%98%e8%ae%a4%e9%a6%96%e9%a1%b5%e7%9a%84%e5%ad%90%e9%a1%b5%e9%9d%a2%e5%88%97%e8%a1%a8%e7%9a%84%e6%96%87%e7%ab%a0%e6%91%98%e8%a6%81%e7%9a%84%e9%95%bf%e5%ba%a6%e6%8e%a7%e5%88%b6>#</a></h1><p>/posts/ 默认首页的文章列表，其文章摘要都很长，如何做长度控制？例如限定为200字？</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/coolshell-in/cc/edit/main/content/zh/docs/hugo/config-book.md target=_blank rel=noopener><img src=../../../svg/edit.svg class=book-icon alt>
<span>编辑本页</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#控制显示toc>控制显示TOC</a><ul><li><a href=#方案使用内容参数强制显示toc>方案：使用内容参数强制显示TOC</a></li><li><a href=#方案创建自定义布局文件>方案：创建自定义布局文件</a></li><li><a href=#撤销默认首页底部的子页面列表>撤销默认首页底部的子页面列表</a></li></ul></li><li><a href=#默认首页的子页面列表的文章摘要的长度控制>默认首页的子页面列表的文章摘要的长度控制</a></li></ul></nav></div></aside></main></body></html>